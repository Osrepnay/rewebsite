<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta property="og:title" content="Game of Life">
		<meta property="og:description" content="A tiny implementation of Conway's Game of Life cellular automaton.">
		<title>Game of Life</title>
		<link rel="stylesheet" href="styles.css">
	</head>
	<body>

		<div id="content">
			
			<div id="settings">
				<button onclick="showDialog(rulesDialog)">rules</button>
				<button onclick="showDialog(initDialog)">initial conditions</button>
				<button onclick="resetAll()">reset all</button>
				<button onclick="showDialog(shareDialog)">share</button>
			</div>

			<canvas id="output"></canvas><br>
			<noscript>If you're reading this message, JavaScript is not available. Unfortunately, it's required to run this demo. Sorry.</noscript>
		
			<div id="controls" style="display: flex; justify-content: center;">
				<button id="toggle" onclick="toggle()">pause</button>
				<button onclick="step()">step</button>
				<button onclick="reset()">reset</button>
			</div>

		</div>

		<div id="modals" style="display: none;">

			<div class="dialog" id="rules-dialog" style="display: none">
				<button class="close-button">&times;</button>
				<p><b>change rules</b></p>
				<table>
					<tr>
						<td><label for="birth-rules">Birth conditions</label></td>
						<td><input type="text" id="birth-rules" placeholder="Neighbor counts..." value="3"></td>
					</tr>
					<tr>
						<td><label for="death-rules">Survival conditions</label></td>
						<td><input type="text" id="survive-rules" placeholder="Neighbor counts..." value="23"></td>
				</table>
				<button id="submit-rules-dialog">save</button>
			</div>

			<div class="dialog" id="init-dialog" style="display: none">
				<button class="close-button">&times;</button>
				<p><b>change initial conditions</b></p>
				<div><input type="radio" id="init-pattern" name="init-type"><label for="init-pattern">start with pattern</label></div>
				<div><input type="radio" id="init-random" name="init-type"><label for="init-random">start with random field</label></div><br>
				<div id="density-control" style="display: none;"><label for="range">density: </label><input type="range" id="init-density"></div>
				<div id="pattern-control" style="display: none;">
					<label for="pattern-preset">preset:</label> <select id="pattern-preset"></select> <button id="load-preset-button">load</button> <br>
					<textarea id="pattern" rows="10" cols="60" placeholder="Pattern..."></textarea><br>
				</div>
				<button id="submit-init-dialog">save and reset</button>
			</div>

			<div class="dialog" id="share-dialog" style="display: none">
				<button class="close-button">&times;</button>
				<p><b>share</b></p>
				<p>Use this link to share the current game of life.</p>
				<input id="share-link" readonly> <button id="copy-button">copy</button>
			</div>
			
		</div>

		<!-- todo: adjustable speed and boundary behavior, built-in patterns -->
		<script src="patterns.js"></script>
		<script src="gol.js"></script>
		<script src="ui.js"></script>

	</body>
</html>